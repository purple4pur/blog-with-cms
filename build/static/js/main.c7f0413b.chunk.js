(this["webpackJsonppurple4pur-s-blog"]=this["webpackJsonppurple4pur-s-blog"]||[]).push([[0],{121:function(e,t,a){e.exports=a.p+"static/media/logo.df728e58.ico"},129:function(e,t,a){e.exports=a(345)},137:function(e,t,a){},138:function(e,t,a){},140:function(e,t,a){},220:function(e,t,a){},237:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){},240:function(e,t,a){},241:function(e,t,a){},242:function(e,t,a){},243:function(e,t,a){},244:function(e,t,a){},343:function(e,t,a){},344:function(e,t,a){},345:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(53),l=a(9),c=a(12),s=a(3),i=a(4),u=a(6),p=a(5),d=a(7),m=a(30),h=(a(137),a(138),a(121)),g=a.n(h),E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).toggleMenu=function(){""===a.state.navClass?a.setState({navClass:" openMenu"}):a.setState({navClass:""})},a.handleOver1=function(){a.setState({hoverClass1:" hover"})},a.handleOver2=function(){a.setState({hoverClass2:" hover"})},a.handleOver3=function(){a.setState({hoverClass3:" hover"})},a.handleOver4=function(){a.setState({hoverClass4:" hover"})},a.handleOver5=function(){a.setState({hoverClass5:" hover"})},a.handleOver6=function(){a.setState({hoverClass6:" hover"})},a.handleOut=function(){a.setState({hoverClass1:"",hoverClass2:"",hoverClass3:"",hoverClass4:"",hoverClass5:"",hoverClass6:""})},a.state={navClass:"",hoverClass1:"",hoverClass2:"",hoverClass3:"",hoverClass4:"",hoverClass5:"",hoverClass6:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("div",{className:"header-ui"},r.a.createElement("span",{onClick:this.toggleMenu},r.a.createElement("i",{className:"fas fa-bars"})),r.a.createElement(l.c,{to:"/"},r.a.createElement("img",{src:g.a,alt:"Purple4pur's Blog"}))),r.a.createElement("nav",{className:"header-nav"+this.state.navClass},r.a.createElement("div",{className:"header-nav-bg-touch",onClick:this.toggleMenu}),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(l.c,{to:"/",className:"header-nav-mobile"},"\u9996\u9875 | HOME"),r.a.createElement(l.c,{to:"/",className:"header-nav-desktop"+this.state.hoverClass1,onMouseOver:this.handleOver1,onMouseOut:this.handleOut},"\u9996\u9875",r.a.createElement("div",null,r.a.createElement("span",null,"HOME")))),r.a.createElement("li",null,r.a.createElement(l.c,{to:"/coding",className:"header-nav-mobile"},"\u4ee3\u7801 | CODING"),r.a.createElement(l.c,{to:"/coding",className:"header-nav-desktop"+this.state.hoverClass2,onMouseOver:this.handleOver2,onMouseOut:this.handleOut},"\u4ee3\u7801",r.a.createElement("div",null,r.a.createElement("span",null,"CODING")))),r.a.createElement("li",null,r.a.createElement(l.c,{to:"/creating",className:"header-nav-mobile"},"\u521b\u4f5c | CREATING"),r.a.createElement(l.c,{to:"/creating",className:"header-nav-desktop"+this.state.hoverClass3,onMouseOver:this.handleOver3,onMouseOut:this.handleOut},"\u521b\u4f5c",r.a.createElement("div",null,r.a.createElement("span",null,"CREATING")))),r.a.createElement("li",null,r.a.createElement(l.c,{to:"/thoughts",className:"header-nav-mobile"},"\u6742\u8c08 | THOUGHTS"),r.a.createElement(l.c,{to:"/thoughts",className:"header-nav-desktop"+this.state.hoverClass4,onMouseOver:this.handleOver4,onMouseOut:this.handleOut},"\u6742\u8c08",r.a.createElement("div",null,r.a.createElement("span",null,"THOUGHTS")))),r.a.createElement("li",null,r.a.createElement(l.c,{to:"/tags",className:"header-nav-mobile"},"\u6807\u7b7e | TAGS"),r.a.createElement(l.c,{to:"/tags",className:"header-nav-desktop"+this.state.hoverClass5,onMouseOver:this.handleOver5,onMouseOut:this.handleOut},"\u6807\u7b7e",r.a.createElement("div",null,r.a.createElement("span",null,"TAGS")))),r.a.createElement("li",null,r.a.createElement(l.c,{to:"/about",className:"header-nav-mobile"},"\u5173\u4e8e | ABOUT"),r.a.createElement(l.c,{to:"/about",className:"header-nav-desktop"+this.state.hoverClass6,onMouseOver:this.handleOver6,onMouseOut:this.handleOut},"\u5173\u4e8e",r.a.createElement("div",null,r.a.createElement("span",null,"ABOUT")))))))}}]),t}(n.PureComponent),f=(a(140),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("span",null,r.a.createElement("i",{className:"far fa-copyright"})," ",r.a.createElement(l.b,{to:"/about"},"Purple4pur")," | 2020 | ",r.a.createElement(l.b,{to:"/admin"},"CMS")),r.a.createElement("span",null,r.a.createElement("a",{href:"http://www.beian.miit.gov.cn/",target:"_blank",rel:"noopener noreferrer"},"\u7ca4ICP\u590719158409\u53f7-1")))}}]),t}(n.PureComponent)),v=a(123),b=a.n(v),O=(a(220),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"markdown-body"},r.a.createElement(b.a,{source:this.props.content,skipHtml:!0}))}}]),t}(n.PureComponent)),y="START_FETCH_LIST",j="FETCH_LIST_SUCCESS",C="FETCH_LIST_FAILED",T="START_FETCH_POST",S="FETCH_POST_SUCCESS",D="FETCH_POST_FAILED",k="START_FETCH_TAGS",I="FETCH_TAGS_SUCCESS",L="FETCH_TAGS_FAILED",N="START_VERIFY_TOKEN",P="VERIFY_TOKEN_SUCCESS",_="VERIFY_TOKEN_FAILED",M="START_VERIFY_LOGIN",F="VERIFY_LOGIN_SUCCESS",w="VERIFY_LOGIN_FAILED",R="START_REMOVE_TOKEN",A="REMOVE_TOKEN_SUCCESS",x="SET_ERROR_MSG",U="RESET_ERROR_MSG",G="START_ADD",B="ADD_POST_SUCCESS",H="ADD_POST_FAILED",V="ADD_DRAFT_SUCCESS",J="ADD_DRAFT_FAILED",W="RESET_ADD_MSG",K=a(124),Y=a.n(K).a.create({baseURL:"https://purple4pur.com/apis"});Y.defaults.headers.post["Content-type"]="application/json; charset=utf-8";var z=function(e,t,a){return Y.post("/login.php",{username:e,password:t,decoratedToken:a})},q=function(){return{type:D}},Q=function(e,t){return function(a){a({type:T});var n,r,o,l=(n=e,Y.get("/post.php",{params:{postID:n}}));"edit"===t&&(r=localStorage.getItem("purple4pur/blog:JWT"),o=e,l=Y.post("/edit_post.php",{decoratedToken:r,postID:o})),l.then((function(e){var t;e.data.errCode?(console.log(e.data.errMsg),a(q()),a(oe(e.data.errCode))):e.data.id?a((t=e.data,{type:S,payload:{data:t}})):(console.log("Error: "+e.data),a(q()),a(oe(99)))})).catch((function(e){console.log(e),a(Z()),a(oe(7))}))}},X=function(e){return{type:j,payload:{data:e}}},Z=function(){return{type:C}},$=function(){return{type:L}},ee=function(e){return function(t){var a;t({type:k}),(a=e,Y.get("/tags.php",{params:{type:a}})).then((function(e){var a;e.data[0].id?t((a=e.data,{type:I,payload:{data:a}})):(console.log("Error: "+e.data),t($()),t(oe(99)))})).catch((function(e){console.log(e),t($()),t(oe(7))}))}},te=function(){return{type:_}},ae=function(){return function(e){e({type:N}),localStorage.getItem("purple4pur/blog:JWT")?z(void 0,void 0,localStorage.getItem("purple4pur/blog:JWT")).then((function(t){var a,n;t.data.activeUser?e((a=t.data.activeUser,n=t.data.activeUserID,{type:P,payload:{user:a,id:n}})):(e(te()),e(re()))})).catch((function(t){console.log(t),e(te()),e(oe(7))})):e(te())}},ne=function(){return{type:w}},re=function(){return function(e){e({type:R}),localStorage.removeItem("purple4pur/blog:JWT"),e({type:A}),e(ae())}},oe=function(e){return{type:x,payload:{code:e}}},le=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.props.isPublic?r.a.createElement("li",null,r.a.createElement("h3",null,r.a.createElement(l.b,{to:"/post/"+this.props.id},this.props.title)),r.a.createElement("span",null,r.a.createElement("i",null,this.props.time.split(" ")[0])),r.a.createElement("span",null,r.a.createElement("i",null,this.props.author))):r.a.createElement("li",null,r.a.createElement("h3",null,r.a.createElement(l.b,{to:"/admin/newpost/"+this.props.id},this.props.title)))}}]),t}(n.PureComponent),ce=(a(237),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={isPublic:!0},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.categoryID?this.props.fetchList(this.props.categoryID,void 0,void 0,void 0):this.props.tagID?this.props.fetchList(void 0,this.props.tagID,void 0,void 0):this.props.authorID?this.props.fetchList(void 0,void 0,this.props.authorID,void 0):(this.props.fetchList(void 0,void 0,void 0,this.props.type),this.setState({isPublic:!1}))}},{key:"render",value:function(){var e=this;return this.props.isLoading?r.a.createElement("div",null,"loading..."):this.props.fetchError?r.a.createElement("div",null,"\u6682\u65e0\u6570\u636e"):r.a.createElement("ul",{className:"post-list"},this.props.list.map((function(t){return r.a.createElement(le,Object.assign({key:t.id},t,{isPublic:e.state.isPublic}))})))}}]),t}(n.PureComponent)),se=Object(c.b)((function(e){return{isLoading:e.postList.isLoading,fetchError:e.postList.fetchError,list:e.postList.list}}),{fetchList:function(e,t,a,n){return function(r){var o,l,c,s;(r({type:y}),n)?localStorage.getItem("purple4pur/blog:JWT")?(l=localStorage.getItem("purple4pur/blog:JWT"),c=n,Y.post("/pvt_dft.php",{decoratedToken:l,type:c})).then((function(e){e.data.errCode?(console.log(e.data.errMsg),r(Z()),r(oe(e.data.errCode))):e.data[0].id?r(X(e.data)):(console.log("Error: "+e.data),r(Z()),r(oe(99)))})).catch((function(e){console.log(e),r(Z()),r(oe(7))})):(r(Z()),r(ae())):(e?(s=e,o=Y.get("/categories.php",{params:{categoryID:s}})):t?o=function(e){return Y.get("/tags.php",{params:{tagID:e}})}(t):a&&(o=function(e){return Y.get("/authors.php",{params:{authorID:e}})}(a)),o.then((function(e){e.data.errCode?(console.log(e.data.errMsg),r(Z()),r(oe(e.data.errCode))):e.data[0].id?r(X(e.data)):(console.log("Error: "+e.data),r(Z()),r(oe(99)))})).catch((function(e){console.log(e),r(Z()),r(oe(7))})))}}})(ce),ie=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("li",null,r.a.createElement("span",null,r.a.createElement(l.b,{to:"/tags/"+this.props.id},this.props.name)))}}]),t}(n.PureComponent),ue=(a(238),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchTags("valid")}},{key:"render",value:function(){return this.props.isLoading?r.a.createElement("div",null,"loading..."):this.props.fetchError?r.a.createElement("div",null,"\u6682\u65e0\u6570\u636e"):r.a.createElement("ul",{className:"tag-list"},this.props.tags.map((function(e){return r.a.createElement(ie,Object.assign({key:e.id},e))})))}}]),t}(n.PureComponent)),pe=Object(c.b)((function(e){return{isLoading:e.tagList.isLoading,fetchError:e.tagList.fetchError,tags:e.tagList.tags}}),{fetchTags:ee})(ue),de=(a(239),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){a.props.resetErrorMsg()},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"error-msgbox"},r.a.createElement("h3",{className:"error-title"},r.a.createElement("span",null,"\u53d1\u751f\u9519\u8bef"),r.a.createElement("button",{onClick:this.handleClick},r.a.createElement("i",{className:"fas fa-times"}))),r.a.createElement("p",null,this.props.errMsg),r.a.createElement("p",null,"Error ",this.props.errCode," ",r.a.createElement("a",{href:"https://github.com/purple4pur/blog-with-cms/blob/master/error-code-table.md",target:"_blank",rel:"noopener noreferrer"},"\u4e86\u89e3\u66f4\u591a")))}}]),t}(n.PureComponent)),me=Object(c.b)((function(e){return{errMsg:e.errorMsg.errMsg,errCode:e.errorMsg.errCode}}),{resetErrorMsg:function(){return{type:U}}})(de),he=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"\u4e00\u8d2b\u5982\u6d17\u7684\u9996\u9875",r.a.createElement("br",null),"\u8fd8\u6ca1\u60f3\u597d\u653e\u4ec0\u4e48\u5185\u5bb9",r.a.createElement("br",null),"\u4e0d\u5982\u5148\u770b\u770b\u5176\u4ed6\u9875\u9762\uff1f"))}}]),t}(n.PureComponent),ge=(a(240),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.title="\u4ee3\u7801 | Purple4pur's Blog"}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"category-header"},r.a.createElement("h1",null,"\u4ee3\u7801 | CODING"),r.a.createElement("p",null,"\u5b66\u662f\u5b66\u4e0d\u61c2\u7684\u4e86\uff0c\u53ea\u80fd\u778e\u7801\u7801\u8fd9\u6837\u5b50\u3002")),r.a.createElement(se,{categoryID:1}))}}]),t}(n.PureComponent)),Ee=(a(241),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.title="\u521b\u4f5c | Purple4pur's Blog"}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"category-header"},r.a.createElement("h1",null,"\u521b\u4f5c | CREATING"),r.a.createElement("p",null,"\u4f60\u4e5f\u60f3\u6210\u4e3a Adobe \u5168\u5bb6\u6876\u5e26\u5e08\u5417\uff1f")),r.a.createElement(se,{categoryID:2}))}}]),t}(n.PureComponent)),fe=(a(242),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.title="\u6742\u8c08 | Purple4pur's Blog"}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"category-header"},r.a.createElement("h1",null,"\u6742\u8c08 | THOUGHTS"),r.a.createElement("p",null,"\u60f3\u5199\u4e5f\u5199\u4e0d\u51fa\u6765\uff0c\u4f60\u8981\u6211\u600e\u4e48\u6837\u561b\uff01")),r.a.createElement(se,{categoryID:3}))}}]),t}(n.PureComponent)),ve=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.title="\u5173\u4e8e | Purple4pur's Blog"}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"\u5f85\u5b8c\u5584\u7684\u5173\u4e8e"),r.a.createElement("span",null,"\u6b64\u535a\u5ba2\u5f00\u6e90\uff0c\u9879\u76ee\u5730\u5740\uff1a",r.a.createElement("a",{href:"https://github.com/purple4pur/blog-with-cms",target:"_blank",rel:"noopener noreferrer"},"GitHub")))}}]),t}(n.PureComponent),be=(a(243),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={tagName:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.title="\u6807\u7b7e | Purple4pur's Blog"}},{key:"render",value:function(){return this.props.match.params.tagID?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tags-header"},r.a.createElement("h1",null,"\u5e26\u6709 #",this.state.tagName," \u6807\u7b7e\u7684\u6587\u7ae0"),r.a.createElement("p",null)),r.a.createElement(se,{tagID:this.props.match.params.tagID})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tags-header"},r.a.createElement("h1",null,"\u6240\u6709\u6807\u7b7e"),r.a.createElement("p",null)),r.a.createElement(pe,null))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.match.params.tagID&&""===t.tagName)for(var a in e.fetchTags("valid"),e.tags)if(e.tags[a].id===e.match.params.tagID)return{tagName:e.tags[a].name};return null}}]),t}(n.PureComponent)),Oe=Object(c.b)((function(e){return{tags:e.tagList.tags}}),{fetchTags:ee})(be),ye=(a(244),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.title="404 | Purple4pur's Blog"}},{key:"render",value:function(){return r.a.createElement("div",{className:"notfound-box"},r.a.createElement("div",{className:"notfound-txt"},r.a.createElement("h1",null,"404"),r.a.createElement("p",null,"\u83ab\u6b3a\u6211\u6ca1\u6709\u5199\u8fd9\u4e00\u9875"),r.a.createElement("p",null,"\u8fd8\u4e0d\u901f\u901f",r.a.createElement(l.b,{to:"/"},"\u8fd4\u56de\u9996\u9875"))))}}]),t}(n.PureComponent)),je=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("ul",null,r.a.createElement("li",null,"manage"===this.props.view?"*":"",r.a.createElement(l.b,{to:"/admin/manage"},"\u6587\u7ae0\u7ba1\u7406")),r.a.createElement("li",null,"newpost"===this.props.view?"*":"",r.a.createElement(l.b,{to:"/admin/newpost"},"\u6587\u7ae0\u53d1\u5e03")),r.a.createElement("li",null,"draft"===this.props.view?"*":"",r.a.createElement(l.b,{to:"/admin/draft"},"\u8349\u7a3f\u7bb1")),r.a.createElement("li",null,"private"===this.props.view?"*":"",r.a.createElement(l.b,{to:"/admin/private"},"\u975e\u516c\u5f00\u6587\u7ae0")))}}]),t}(n.PureComponent),Ce=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(se,{authorID:this.props.activeUserID}))}}]),t}(n.PureComponent),Te=Object(c.b)((function(e){return{activeUserID:e.adminStatus.activeUserID}}))(Ce),Se=a(127),De=a(347),ke=a(346),Ie=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).updateTitle=function(e){a.setState({title:e.target.value})},a.updateCategory=function(e){a.setState({category:parseInt(e.target.value,10)})},a.handleAddTag=function(e){if(!e.key||"Enter"===e.key){var t=void 0;if(t=e.target?e.target.value:e,!/\s+/.test(t)){var n=-Date.now();for(var r in a.state.tags)if(a.state.tags[r].name===t)return document.getElementById("tag-input").value="",void a.setState({candidateTags:[]});for(var o in a.props.existTags)if(a.props.existTags[o].name===t){n=parseInt(a.props.existTags[o].id);break}a.setState({tags:[].concat(Object(Se.a)(a.state.tags),[{id:n,name:t}]),candidateTags:[]}),document.getElementById("tag-input").value=""}}},a.updateCandidateTags=function(e){if(""!==e.target.value){var t=new RegExp(e.target.value,"i");a.setState({candidateTags:a.props.existTags.filter((function(e){return t.test(e.name)}))})}else a.setState({candidateTags:[]})},a.handleDelTag=function(e){a.setState({tags:a.state.tags.filter((function(t){return t.id!==e}))})},a.updateContent=function(e){a.setState({content:e.target.value})},a.handleSave=function(e){e.preventDefault(),a.props.addPost("draft",a.state.title,a.state.content,a.state.category,a.state.tags)},a.handleAddPost=function(e){e.preventDefault(),a.props.addPost("post",a.state.title,a.state.content,a.state.category,a.state.tags)},a.state={id:0,title:"",content:"",category:1,tags:[],candidateTags:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchTags("all")}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement("div",{className:"edit-post-info",onKeyDown:function(e){"Enter"===e.key&&e.preventDefault()}},r.a.createElement("div",null,r.a.createElement("span",null,"\u6807\u9898\uff1a"),r.a.createElement(De.a,{component:"input",type:"text",name:"title",value:this.state.title,onChange:this.updateTitle})),r.a.createElement("div",null,r.a.createElement("span",null,"\u680f\u76ee\uff1a"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(De.a,{component:"input",type:"radio",name:"category",id:"coding",value:"1",checked:1===this.state.category,onChange:this.updateCategory}),r.a.createElement("label",{htmlFor:"coding"},"\u4ee3\u7801")),r.a.createElement("li",null,r.a.createElement(De.a,{component:"input",type:"radio",name:"category",id:"creating",value:"2",checked:2===this.state.category,onChange:this.updateCategory}),r.a.createElement("label",{htmlFor:"creating"},"\u521b\u4f5c")),r.a.createElement("li",null,r.a.createElement(De.a,{component:"input",type:"radio",name:"category",id:"thoughts",value:"3",checked:3===this.state.category,onChange:this.updateCategory}),r.a.createElement("label",{htmlFor:"thoughts"},"\u6742\u8c08")))),r.a.createElement("div",null,r.a.createElement("span",null,"\u6807\u7b7e\uff1a"),r.a.createElement("ul",null,this.state.tags.map((function(t){return r.a.createElement("li",{key:t.id},r.a.createElement("span",null,t.name),r.a.createElement("i",{className:"fas fa-times-circle",onClick:e.handleDelTag.bind(e,t.id)}))})),r.a.createElement("li",null,r.a.createElement("input",{type:"text",name:"tag-input",id:"tag-input",placeholder:"\u56de\u8f66\u4ee5\u6dfb\u52a0\u6807\u7b7e",onKeyUp:this.handleAddTag,onChange:this.updateCandidateTags,autoComplete:"off"}),r.a.createElement("ul",null,this.state.candidateTags.map((function(t){return r.a.createElement("li",{key:t.id,onClick:e.handleAddTag.bind(e,t.name)},t.name)}))))))),r.a.createElement("div",{className:"edit-post-content"},r.a.createElement("div",null,r.a.createElement("span",null,"\u6b63\u6587\uff1a"),r.a.createElement(De.a,{component:"textarea",name:"content",cols:"50",rows:"10",value:this.state.content,onChange:this.updateContent})),r.a.createElement("div",null,r.a.createElement("span",null,"\u6b63\u6587\u9884\u89c8\uff1a"),r.a.createElement(O,{content:this.state.content}))),r.a.createElement("div",{className:"edit-post-btn"},r.a.createElement("span",null,this.props.msg),r.a.createElement("input",{type:"submit",value:"\u53d1\u5e03",onClick:this.handleAddPost}))),this.props.isAdding?r.a.createElement("div",null,"\u64cd\u4f5c\u4e2d..."):null)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.match.params.postID&&e.initialValues&&t.id!==e.initialValues.id?e.initialValues:null}}]),t}(n.PureComponent);Ie=Object(ke.a)({form:"editPost",enableReinitialize:!0})(Ie);var Le=Object(c.b)((function(e){return{isAdding:e.addPost.isLoading,msg:e.addPost.msg,initialValues:e.post.data,existTags:e.tagList.tags}}),{addPost:function(e,t,a,n,r){return function(o){o({type:G});var l,c,s,i,u,p,d={type:B},m={type:H};"draft"===e&&(d={type:V},m={type:J}),(l=localStorage.getItem("purple4pur/blog:JWT"),c=e,s=t,i=a,u=n,p=r,Y.post("/update_post.php",{decoratedToken:l,type:c,title:s,content:i,categoryID:u,tags:p})).then((function(e){console.log(e.data),e.data.status?o(d):e.data.errCode?(console.log(e.data.errMsg),o(m),o(oe(e.data.errCode))):(console.log("Error: "+e.data),o(m),o(oe(99)))})).catch((function(e){console.log(e),o(m),o(oe(7))})).finally((function(){setTimeout((function(){o({type:W})}),3e3)}))}},fetchTags:ee})(Ie),Ne=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(se,{type:"draft"}))}}]),t}(n.PureComponent),Pe=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(se,{type:"private"}))}}]),t}(n.PureComponent),_e={login:"\u767b\u9646",manage:"\u6587\u7ae0\u7ba1\u7406",newpost:"\u6587\u7ae0\u53d1\u5e03",draft:"\u8349\u7a3f\u7bb1",private:"\u975e\u516c\u5f00\u6587\u7ae0"},Me=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleRmToken=function(){a.props.removeToken()},a.state={activeView:a.props.match.params.viewSelector,postID:a.props.match.params.postID,isReadyToRedirect:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.title=_e[this.state.activeView]+" - CMS | Purple4pur's Blog",this.props.verifyToken(),this.state.postID&&this.props.fetchPost(this.state.postID,"edit"),this.setState({isReadyToRedirect:!0})}},{key:"render",value:function(){var e=this;return"login"===this.state.activeView?r.a.createElement(m.b,{component:Re,path:"/admin/login"}):this.props.isLoading||!this.state.isReadyToRedirect?r.a.createElement("div",null,"loading..."):this.props.isLoggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"\u5df2\u7ecf\u767b\u9646\u4e3a\uff1a",this.props.activeUser),r.a.createElement("input",{type:"button",value:"\u9000\u51fa",onClick:this.handleRmToken}),r.a.createElement(je,{view:this.state.activeView}),r.a.createElement(m.d,null,r.a.createElement(m.a,{exact:!0,from:"/admin",to:"/admin/manage"}),r.a.createElement(m.b,{exact:!0,path:"/admin/manage",component:Te}),r.a.createElement(m.b,{exact:!0,path:"/admin/newpost/:postID?",render:function(t){return r.a.createElement(Le,Object.assign({},t,e.props.oriData))}}),r.a.createElement(m.b,{exact:!0,path:"/admin/draft",component:Ne}),r.a.createElement(m.b,{exact:!0,path:"/admin/private",component:Pe}),r.a.createElement(m.a,{to:"/404"}))):r.a.createElement(m.a,{to:"/admin/login"})}}]),t}(n.PureComponent),Fe=Object(c.b)((function(e){return{isLoading:e.adminStatus.isLoading,isLoggedIn:e.adminStatus.isLoggedIn,activeUser:e.adminStatus.activeUser,activeUserID:e.adminStatus.activeUserID,oriData:e.post.data}}),{verifyToken:ae,removeToken:re,fetchPost:Q})(Me),we=(a(343),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleFocus1=function(){a.setState({focus1:!0})},a.handleBlur1=function(){""===a.state.user&&a.setState({focus1:!1})},a.handleFocus2=function(){a.setState({focus2:!0})},a.handleBlur2=function(){""===a.state.pwd&&a.setState({focus2:!1})},a.handleChgUser=function(e){a.setState({user:e.target.value})},a.handleChgPwd=function(e){a.setState({pwd:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.props.verifyLogin(a.state.user,a.state.pwd)},a.handleReset=function(e){e.preventDefault(),a.setState({user:"",pwd:"",focus1:!1,focus2:!1})},a.state={user:"",pwd:"",focus1:!1,focus2:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.props.isLoading?r.a.createElement("div",null,"loading..."):this.props.isLoggedIn?r.a.createElement(m.a,{to:"/admin"}):r.a.createElement("div",{className:"login-box"},r.a.createElement("form",{className:"login-form"},r.a.createElement("div",{className:"login-txtb"},r.a.createElement("input",{type:"text",name:"username",placeholder:"USERNAME",value:this.state.user,autoComplete:"off",onChange:this.handleChgUser,onFocus:this.handleFocus1,onBlur:this.handleBlur1}),r.a.createElement("div",{className:"login-txtb-not-focus"+(this.state.focus1?" login-txtb-focus":"")})),r.a.createElement("div",{className:"login-txtb"},r.a.createElement("input",{type:"password",name:"password",placeholder:"********",value:this.state.pwd,autoComplete:"off",onChange:this.handleChgPwd,onFocus:this.handleFocus2,onBlur:this.handleBlur2}),r.a.createElement("div",{className:"login-txtb-not-focus"+(this.state.focus2?" login-txtb-focus":"")})),r.a.createElement("div",{className:"login-btns"},r.a.createElement("input",{type:"submit",value:"\u767b\u9646",onClick:this.handleSubmit}),r.a.createElement("input",{type:"reset",value:"\u91cd\u7f6e",onClick:this.handleReset}))))}}]),t}(n.PureComponent)),Re=Object(c.b)((function(e){return{isLoading:e.adminStatus.isLoading,isLoggedIn:e.adminStatus.isLoggedIn}}),{verifyLogin:function(e,t){return function(a){a({type:M}),z(e,t,void 0).then((function(e){""===e.data?(localStorage.setItem("purple4pur/blog:JWT",e.headers.authorization),a({type:F}),a(ae())):e.data.errCode?(console.log(e.data.errMsg),a(ne()),a(oe(e.data.errCode))):(console.log("Error: "+e.data),a(ne()),a(oe(99)))})).catch((function(e){console.log(e),a(ne()),a(oe(7))}))}},verifyToken:ae})(we),Ae=(a(344),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchPost(this.props.match.params.id,"readonly")}},{key:"render",value:function(){return document.title=(this.props.data.title?this.props.data.title+" - ":"")+"Purple4pur's Blog",this.props.isLoading?r.a.createElement("div",null,"loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title-info"},r.a.createElement("h1",null,this.props.data.title),r.a.createElement("span",null,this.props.data.time),r.a.createElement("span",null,this.props.data.author),this.props.data.tags?r.a.createElement("ul",null,this.props.data.tags.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(l.b,{to:"/tags/"+e.id},"#",e.name))}))):null),r.a.createElement(O,{content:this.props.data.content}))}}]),t}(n.PureComponent)),xe=Object(c.b)((function(e){return{isLoading:e.post.isLoading,data:e.post.data}}),{fetchPost:Q})(Ae),Ue=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(E,null),r.a.createElement("main",{className:"main"},r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/",component:he}),r.a.createElement(m.b,{exact:!0,path:"/coding",component:ge}),r.a.createElement(m.b,{exact:!0,path:"/creating",component:Ee}),r.a.createElement(m.b,{exact:!0,path:"/thoughts",component:fe}),r.a.createElement(m.b,{exact:!0,path:"/tags/:tagID?",component:Oe}),r.a.createElement(m.b,{exact:!0,path:"/post/:id",component:xe}),r.a.createElement(m.b,{exact:!0,path:"/about",component:ve}),r.a.createElement(m.b,{exact:!0,path:"/admin/:viewSelector?/:postID?",component:Fe}),r.a.createElement(m.b,{exact:!0,path:"/404",component:ye}),r.a.createElement(m.a,{to:"/404"}))),r.a.createElement(f,null),this.props.isError?r.a.createElement(me,null):null)}}]),t}(n.PureComponent),Ge=Object(c.b)((function(e){return{isError:e.errorMsg.isError}}))(Ue),Be=a(14),He=a(126),Ve=a(348),Je=a(13),We={isLoading:!1,data:{}},Ke={isLoading:!1,fetchError:!1,list:[]},Ye={isLoading:!1,fetchError:!1,tags:[]},ze={isLoading:!1,isLoggedIn:!1,activeUser:"",activeUserID:void 0},qe={isError:!1,errCode:0,errMsg:""},Qe={0:"",1:"\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25",2:"\u7528\u6237\u540d\u4e3a\u7a7a",3:"\u5bc6\u7801\u4e3a\u7a7a",4:"\u7528\u6237\u540d\u4e0d\u5b58\u5728",5:"\u5bc6\u7801\u9519\u8bef",6:"\u65e0\u6548 JWT",7:"\u7f51\u7edc\u9519\u8bef",8:"\u67e5\u8be2\u7ed3\u679c\u4e3a\u7a7a",9:"\u6807\u9898\u4e3a\u7a7a",10:"\u6b63\u6587\u4e3a\u7a7a",11:"\u53c2\u6570\u9519\u8bef",12:"\u65e0\u6548\u680f\u76ee",99:"\u672a\u77e5\u9519\u8bef"},Xe={isLoading:!1,msg:""},Ze=Object(Be.c)({post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(Je.a)({},e,{isLoading:!0});case S:return Object(Je.a)({},e,{isLoading:!1,data:t.payload.data});case D:return We;default:return e}},postList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(Je.a)({},e,{isLoading:!0});case j:return Object(Je.a)({},e,{isLoading:!1,fetchError:!1,list:t.payload.data});case C:return Object(Je.a)({},e,{isLoading:!1,fetchError:!0});default:return e}},tagList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(Je.a)({},e,{isLoading:!0});case I:return Object(Je.a)({},e,{isLoading:!1,fetchError:!1,tags:t.payload.data});case L:return Object(Je.a)({},e,{isLoading:!1,fetchError:!0});default:return e}},adminStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(Je.a)({},e,{isLoading:!0});case P:return Object(Je.a)({},e,{isLoading:!1,isLoggedIn:!0,activeUser:t.payload.user,activeUserID:t.payload.id});case _:return ze;case M:return Object(Je.a)({},e,{isLoading:!0});case F:case w:return Object(Je.a)({},e,{isLoading:!1});case R:return Object(Je.a)({},e,{isLoading:!0});case A:return ze;default:return e}},errorMsg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(Je.a)({},e,{isError:!0,errCode:t.payload.code,errMsg:Qe[t.payload.code]});case U:return qe;default:return e}},addPost:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Object(Je.a)({},e,{isLoading:!0});case B:return Object(Je.a)({},e,{isLoading:!1,msg:"\u53d1\u5e03\u6210\u529f"});case H:return Object(Je.a)({},e,{isLoading:!1,msg:"\u53d1\u5e03\u5931\u8d25"});case V:return Object(Je.a)({},e,{isLoading:!1,msg:"\u4fdd\u5b58\u6210\u529f"});case J:return Object(Je.a)({},e,{isLoading:!1,msg:"\u4fdd\u5b58\u5931\u8d25"});case W:return Xe;default:return e}},form:Ve.a}),$e=Object(Be.d)(Ze,Object(Be.a)(He.a));Object(o.render)(r.a.createElement(c.a,{store:$e},r.a.createElement(l.a,{forceRefresh:!0},r.a.createElement(Ge,null))),document.querySelector("#root"))}},[[129,1,2]]]);
//# sourceMappingURL=main.c7f0413b.chunk.js.map